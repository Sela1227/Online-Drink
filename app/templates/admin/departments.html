{% extends "base.html" %}

{% block title %}éƒ¨é–€ç®¡ç† - SELA å¿«é»ä¾†é»é¤{% endblock %}

{% block content %}
<div class="space-y-4">
    <!-- æ¨™é¡Œåˆ— -->
    <div class="flex items-center justify-between">
        <h1 class="text-xl font-bold text-gray-800">ğŸ‘¥ éƒ¨é–€ç®¡ç†</h1>
        <a href="/admin" class="text-sm text-gray-500 hover:text-gray-700">â† è¿”å›</a>
    </div>
    
    <!-- æ–°å¢éƒ¨é–€ -->
    <div class="bg-white rounded-lg shadow-sm p-4">
        <h2 class="font-medium text-gray-800 mb-3">â• æ–°å¢éƒ¨é–€</h2>
        <form action="/admin/departments" method="POST" class="flex gap-2">
            <input type="text" name="name" required
                   placeholder="éƒ¨é–€åç¨±"
                   class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent">
            <input type="text" name="description"
                   placeholder="èªªæ˜ï¼ˆé¸å¡«ï¼‰"
                   class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-transparent">
            <button type="submit" class="bg-orange-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-orange-600">
                æ–°å¢
            </button>
        </form>
    </div>
    
    <!-- éƒ¨é–€åˆ—è¡¨ -->
    {% if departments %}
    <div class="space-y-3">
        {% for dept in departments %}
        <div class="bg-white rounded-lg shadow-sm p-4">
            <div class="flex items-center justify-between">
                <div class="flex-1">
                    <div class="flex items-center gap-2">
                        <span class="font-medium text-gray-800">{{ dept.name }}</span>
                        {% if dept.is_public %}
                        <span class="text-xs bg-blue-100 text-blue-600 px-2 py-0.5 rounded">å…¬é–‹</span>
                        {% endif %}
                        {% if not dept.is_active %}
                        <span class="text-xs bg-gray-100 text-gray-500 px-2 py-0.5 rounded">å·²åœç”¨</span>
                        {% endif %}
                    </div>
                    {% if dept.description %}
                    <div class="text-sm text-gray-500 mt-1">{{ dept.description }}</div>
                    {% endif %}
                    <div class="text-xs text-gray-400 mt-2">
                        {{ dept.member_count }} ä½æˆå“¡ Â· {{ dept.leader_count }} ä½å°çµ„é•·
                    </div>
                </div>
                
                <div class="flex items-center gap-2">
                    <a href="/admin/departments/{{ dept.id }}" 
                       class="text-sm text-orange-500 hover:text-orange-600">
                        ç®¡ç†æˆå“¡
                    </a>
                    <form action="/admin/departments/{{ dept.id }}/toggle" method="POST" class="inline">
                        <button type="submit" class="text-sm text-gray-500 hover:text-gray-700">
                            {% if dept.is_active %}åœç”¨{% else %}å•Ÿç”¨{% endif %}
                        </button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-12 text-gray-500">
        <p>é‚„æ²’æœ‰å»ºç«‹éƒ¨é–€</p>
        <p class="text-sm mt-1">éƒ¨é–€å¯ç”¨æ–¼å€éš”åœ˜å–®çš„å¯è¦‹ç¯„åœ</p>
    </div>
    {% endif %}
</div>
{% endblock %}
