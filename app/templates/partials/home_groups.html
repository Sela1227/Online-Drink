<!-- é£²æ–™å€ -->
{% if drink_groups %}
<div class="mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-3 flex items-center">
        <span class="mr-2">ğŸ§‹</span> é£²æ–™ ({{ drink_groups|length }})
    </h2>
    <div class="grid grid-cols-2 gap-3">
        {% for group in drink_groups %}
        {% include "partials/group_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- é¤é»å€ -->
{% if meal_groups %}
<div class="mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-3 flex items-center">
        <span class="mr-2">ğŸ±</span> é¤é» ({{ meal_groups|length }})
    </h2>
    <div class="grid grid-cols-2 gap-3">
        {% for group in meal_groups %}
        {% include "partials/group_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- åœ˜è³¼å€ -->
{% if groupbuy_groups %}
<div class="mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-3 flex items-center">
        <span class="mr-2">ğŸ›’</span> åœ˜è³¼ ({{ groupbuy_groups|length }})
    </h2>
    <div class="grid grid-cols-2 gap-3">
        {% for group in groupbuy_groups %}
        {% include "partials/group_card.html" %}
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- ç„¡é–‹æ”¾åœ˜ -->
{% if not drink_groups and not meal_groups and not groupbuy_groups %}
<div class="text-center py-8 text-gray-500">
    <div class="text-4xl mb-2">ğŸ“­</div>
    <p>ç›®å‰æ²’æœ‰é–‹æ”¾ä¸­çš„åœ˜</p>
</div>
{% endif %}

<!-- å·²æˆªæ­¢å€ï¼ˆæœ€è¿‘ä¸€é€±ï¼‰ -->
{% if closed_groups %}
<div class="mb-6" x-data="{ open: false }">
    <button @click="open = !open" class="w-full text-left">
        <h2 class="text-lg font-semibold text-gray-500 mb-3 flex items-center">
            <span class="mr-2" :class="open ? 'rotate-90' : ''" style="transition: transform 0.2s">â–¶</span>
            å·²æˆªæ­¢ ({{ closed_groups|length }})
        </h2>
    </button>
    <div x-show="open" x-collapse class="grid grid-cols-2 gap-3">
        {% for group in closed_groups %}
        <a href="/groups/{{ group.id }}" class="block bg-gray-100 rounded-xl p-3 opacity-60 hover:opacity-80 transition-opacity">
            <div class="flex items-center gap-2 mb-1">
                {% if group.store.logo_url %}
                <img src="{{ group.store.logo_url }}" alt="" class="w-8 h-8 rounded-full object-cover">
                {% else %}
                <div class="w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-sm">
                    {{ group.category_icon }}
                </div>
                {% endif %}
                <span class="font-medium text-gray-700 truncate">{{ group.store.name }}</span>
            </div>
            <div class="text-xs text-gray-500">
                {{ (group.deadline|taipei).strftime('%m/%d') }} æˆªæ­¢
            </div>
            <div class="text-xs text-gray-400 mt-1">
                {{ group.submitted_count }} äººå·²é»
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}

<!-- æ­·å²å€ï¼ˆè¶…éä¸€é€±ï¼Œåªæœ‰ç®¡ç†å“¡èƒ½çœ‹ï¼‰ -->
{% if history_groups %}
<div class="mb-6" x-data="{ open: false }">
    <button @click="open = !open" class="w-full text-left">
        <h2 class="text-lg font-semibold text-gray-400 mb-3 flex items-center">
            <span class="mr-2" :class="open ? 'rotate-90' : ''" style="transition: transform 0.2s">â–¶</span>
            ğŸ“ æ­·å²ç´€éŒ„ ({{ history_groups|length }})
            <span class="ml-2 text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded">åƒ…ç®¡ç†å“¡</span>
        </h2>
    </button>
    <div x-show="open" x-collapse class="grid grid-cols-2 gap-3">
        {% for group in history_groups %}
        <a href="/groups/{{ group.id }}" class="block bg-gray-50 rounded-xl p-3 opacity-40 hover:opacity-60 transition-opacity">
            <div class="flex items-center gap-2 mb-1">
                {% if group.store.logo_url %}
                <img src="{{ group.store.logo_url }}" alt="" class="w-8 h-8 rounded-full object-cover grayscale">
                {% else %}
                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-sm">
                    {{ group.category_icon }}
                </div>
                {% endif %}
                <span class="font-medium text-gray-500 truncate">{{ group.store.name }}</span>
            </div>
            <div class="text-xs text-gray-400">
                {{ (group.deadline|taipei).strftime('%Y/%m/%d') }}
            </div>
            <div class="text-xs text-gray-400 mt-1">
                {{ group.submitted_count }} äººå·²é»
            </div>
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}
