{# åŒ—æ­é¢¨ç°¡æ½”å¡ç‰‡ #}
{% set accent = 'amber' if group.category.value == 'drink' else ('green' if group.category.value == 'meal' else 'blue') %}

<a href="/groups/{{ group.id }}" 
   class="block bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-{{ accent }}-200 relative">
    
    <!-- é™å®šæ¨™ç±¤ -->
    {% if not group.is_public %}
    <div class="absolute top-2 right-2 text-[10px] bg-purple-100 text-purple-600 px-1.5 py-0.5 rounded-full">
        ğŸ‘¥
    </div>
    {% endif %}
    
    <!-- é ‚éƒ¨ï¼šLogo + è³‡è¨Š -->
    <div class="flex gap-3">
        <!-- Logo -->
        <div class="w-14 h-14 rounded-xl bg-gray-50 flex items-center justify-center overflow-hidden flex-shrink-0">
            {% if group.store.logo_url %}
            <img src="{{ group.store.logo_url }}" alt="{{ group.store.name }}" class="w-12 h-12 object-contain">
            {% else %}
            <span class="text-2xl">
                {% if group.category.value == 'drink' %}ğŸ§‹
                {% elif group.category.value == 'meal' %}ğŸ±
                {% else %}ğŸ›’{% endif %}
            </span>
            {% endif %}
        </div>
        
        <!-- è³‡è¨Š -->
        <div class="flex-1 min-w-0">
            <div class="text-sm font-semibold text-gray-800 truncate">{{ group.name }}</div>
            <div class="text-xs text-gray-500 truncate">{{ group.store.name }}</div>
            <div class="text-xs text-gray-400 mt-0.5">{{ group.owner.show_name }}</div>
        </div>
    </div>
    
    <!-- å‚™è¨» -->
    {% if group.note %}
    <div class="mt-2 text-xs text-gray-500 line-clamp-1 bg-gray-50 rounded-lg px-2 py-1">
        ğŸ“ {{ group.note }}
    </div>
    {% endif %}
    
    <!-- åº•éƒ¨ï¼šç‹€æ…‹ -->
    <div class="mt-3 flex items-center justify-between">
        <!-- è¨‚å–®çµ±è¨ˆ -->
        <div class="flex items-center gap-2 text-xs">
            {% if group.submitted_count > 0 %}
            <span class="text-green-600 font-medium">âœ“ {{ group.submitted_count }}</span>
            {% endif %}
            {% if group.pending_count > 0 %}
            <span class="text-{{ accent }}-500">ğŸ›’ {{ group.pending_count }}</span>
            {% endif %}
            {% if group.submitted_count == 0 and group.pending_count == 0 %}
            <span class="text-gray-300">å°šç„¡è¨‚å–®</span>
            {% endif %}
        </div>
        
        <!-- æˆªæ­¢æ™‚é–“ -->
        {% if group.is_open %}
        <div class="text-xs font-medium text-{{ accent }}-600 bg-{{ accent }}-50 px-2 py-1 rounded-full"
             x-data="countdown('{{ group.deadline.isoformat() }}')" 
             x-text="display"></div>
        {% else %}
        <span class="text-xs text-gray-400">å·²æˆªæ­¢</span>
        {% endif %}
    </div>
</a>
