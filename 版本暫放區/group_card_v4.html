<!-- åœ˜å–®ä¾¿åˆ©è²¼å¡ç‰‡ -->
<a href="/groups/{{ group.id }}" 
   class="block rounded-lg p-4 shadow hover:shadow-md transition relative
          {% if group.category.value == 'drink' %}bg-amber-50
          {% elif group.category.value == 'meal' %}bg-green-50
          {% else %}bg-blue-50{% endif %}"
   style="min-height: 130px;">
    
    <!-- ä¾¿åˆ©è²¼é ‚éƒ¨è† å¸¶æ•ˆæœ -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-3 rounded
                {% if group.category.value == 'drink' %}bg-amber-200/70
                {% elif group.category.value == 'meal' %}bg-green-200/70
                {% else %}bg-blue-200/70{% endif %}"></div>
    
    <!-- Logo + åœ˜å -->
    <div class="flex items-start gap-2">
        {% if group.store.logo_url %}
        <img src="{{ group.store.logo_url }}" class="w-10 h-10 rounded-lg object-cover flex-shrink-0">
        {% endif %}
        <div class="flex-1 min-w-0">
            <div class="text-sm font-bold text-gray-800 truncate">{{ group.name }}</div>
            <div class="text-xs text-gray-500">{{ group.store.name }}</div>
        </div>
    </div>
    
    <!-- åœ˜ä¸» -->
    <div class="text-xs text-gray-400 mt-1">{{ group.owner.display_name }}</div>
    
    <!-- å‚™è¨» -->
    {% if group.note %}
    <div class="text-xs mt-1 truncate
                {% if group.category.value == 'drink' %}text-amber-700
                {% elif group.category.value == 'meal' %}text-green-700
                {% else %}text-blue-700{% endif %}">
        ğŸ“ {{ group.note }}
    </div>
    {% endif %}
    
    <!-- åº•éƒ¨ï¼šè¨‚å–®çµ±è¨ˆ + å€’æ•¸ -->
    <div class="absolute bottom-3 left-3 right-3 flex items-center justify-between">
        <!-- è¨‚å–®çµ±è¨ˆ -->
        <div class="text-xs text-gray-500">
            {% set submitted = group.orders|selectattr('status.value', 'equalto', 'submitted')|list|length %}
            {% set pending = group.orders|selectattr('status.value', 'in', ['draft', 'editing'])|list|length %}
            {% if submitted > 0 %}
            <span class="text-green-600">âœ“{{ submitted }}</span>
            {% endif %}
            {% if pending > 0 %}
            <span class="text-orange-500 ml-1">ğŸ›’{{ pending }}</span>
            {% endif %}
        </div>
        
        <!-- å€’æ•¸è¨ˆæ™‚ -->
        <span class="text-xs font-medium
                     {% if group.category.value == 'drink' %}text-orange-600
                     {% elif group.category.value == 'meal' %}text-green-600
                     {% else %}text-blue-600{% endif %}"
              x-data="countdown('{{ group.deadline.isoformat() }}')"
              x-text="display"></span>
    </div>
</a>
