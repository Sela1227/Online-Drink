{# ä¾¿åˆ©è²¼å¡ç‰‡ - ç”¨æ–¼é¦–é é¡¯ç¤ºåœ˜å–® #}
{% set bg_color = 'bg-amber-50' if group.category.value == 'drink' else ('bg-green-50' if group.category.value == 'meal' else 'bg-blue-50') %}
{% set tape_color = 'bg-amber-200/70' if group.category.value == 'drink' else ('bg-green-200/70' if group.category.value == 'meal' else 'bg-blue-200/70') %}
{% set note_color = 'text-amber-700' if group.category.value == 'drink' else ('text-green-700' if group.category.value == 'meal' else 'text-blue-700') %}

<a href="/groups/{{ group.id }}" 
   class="block {{ bg_color }} rounded-lg p-3 shadow hover:shadow-md transition relative"
   style="min-height: 130px;">
    <!-- ä¾¿åˆ©è²¼é ‚éƒ¨è† å¸¶æ•ˆæœ -->
    <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-3 {{ tape_color }} rounded"></div>
    
    <!-- é ‚éƒ¨ï¼šLogo + åœ˜å -->
    <div class="flex items-start gap-2">
        {% if group.store.logo_url %}
        <img src="{{ group.store.logo_url }}" 
             alt="{{ group.store.name }}" 
             class="w-10 h-10 rounded object-contain bg-white flex-shrink-0 shadow-sm">
        {% endif %}
        <div class="flex-1 min-w-0">
            <div class="text-sm font-bold text-gray-800 truncate">{{ group.name }}</div>
            <div class="text-xs text-gray-500 truncate">{{ group.store.name }}</div>
        </div>
    </div>
    
    <!-- åœ˜ä¸» -->
    <div class="text-xs text-gray-400 mt-1.5">{{ group.owner.show_name }}</div>
    
    <!-- å‚™è¨»ï¼ˆç°¡çŸ­é¡¯ç¤ºï¼‰ -->
    {% if group.note %}
    <div class="text-xs {{ note_color }} mt-1 line-clamp-1">ğŸ“ {{ group.note }}</div>
    {% endif %}
    
    <!-- åº•éƒ¨ï¼šè¨‚å–®çµ±è¨ˆ + æˆªæ­¢æ™‚é–“ -->
    <div class="absolute bottom-2 left-3 right-3 flex items-center justify-between">
        <!-- è¨‚å–®çµ±è¨ˆ -->
        <div class="flex items-center gap-2 text-xs">
            {% if group.submitted_count > 0 %}
            <span class="text-green-600" title="å·²çµå–®">âœ“{{ group.submitted_count }}</span>
            {% endif %}
            {% if group.pending_count > 0 %}
            <span class="text-orange-500" title="é»é¤ä¸­">ğŸ›’{{ group.pending_count }}</span>
            {% endif %}
            {% if group.submitted_count == 0 and group.pending_count == 0 %}
            <span class="text-gray-400">å°šç„¡è¨‚å–®</span>
            {% endif %}
        </div>
        
        <!-- æˆªæ­¢æ™‚é–“ -->
        {% if group.is_open %}
        <span class="text-xs text-orange-600 font-medium"
              x-data="countdown('{{ group.deadline.isoformat() }}')"
              x-text="display"></span>
        {% else %}
        <span class="text-xs text-gray-400">å·²æˆªæ­¢</span>
        {% endif %}
    </div>
</a>
