# SELA å¿«é»ä¾†é»é¤ - å°ˆæ¡ˆæ¶æ§‹æ–‡æª”

> åœ˜è³¼è¨‚é¤ç³»çµ± | ç´„ 30 äººä½¿ç”¨ | LINE Login èªè­‰

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
ç·šä¸Šè¨‚é¤/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                 # FastAPI æ‡‰ç”¨ç¨‹å¼å…¥å£
â”‚   â”œâ”€â”€ config.py               # ç’°å¢ƒè¨­å®šï¼ˆPydantic Settingsï¼‰
â”‚   â”œâ”€â”€ database.py             # SQLAlchemy è³‡æ–™åº«é€£ç·š
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # è³‡æ–™åº«æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ¶æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ store.py            # åº—å®¶ã€åˆ†é¡ã€é¸é …æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ menu.py             # èœå–®ã€åˆ†é¡ã€å“é …æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ group.py            # åœ˜å–®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ order.py            # è¨‚å–®ã€è¨‚å–®é …ç›®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ feedback.py         # å•é¡Œå›å ±æ¨¡å‹
â”‚   â”‚
â”‚   â”œâ”€â”€ routers/                # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ auth.py             # LINE ç™»å…¥/ç™»å‡º
â”‚   â”‚   â”œâ”€â”€ auth_extra.py       # é¡å¤–èªè­‰åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ home.py             # é¦–é 
â”‚   â”‚   â”œâ”€â”€ groups.py           # åœ˜å–®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ orders.py           # è¨‚å–®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ orders_extra.py     # é¡å¤–è¨‚å–®åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ admin.py            # ç®¡ç†å¾Œå°
â”‚   â”‚   â”œâ”€â”€ feedback.py         # å•é¡Œå›å ±
â”‚   â”‚   â””â”€â”€ dev.py              # é–‹ç™¼å·¥å…·
â”‚   â”‚
â”‚   â”œâ”€â”€ services/               # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ auth.py             # èªè­‰æœå‹™ï¼ˆJWTï¼‰
â”‚   â”‚   â”œâ”€â”€ import_service.py   # JSON åŒ¯å…¥
â”‚   â”‚   â”œâ”€â”€ export_service.py   # åŒ¯å‡ºæœå‹™
â”‚   â”‚   â”œâ”€â”€ upload_service.py   # Cloudinary ä¸Šå‚³
â”‚   â”‚   â””â”€â”€ stats_service.py    # çµ±è¨ˆæœå‹™
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                # Pydantic é©—è­‰
â”‚   â”‚   â”œâ”€â”€ store.py            # åº—å®¶ Schema
â”‚   â”‚   â””â”€â”€ menu.py             # èœå–® Schema
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/              # Jinja2 æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ base.html           # åŸºç¤æ¨¡æ¿
â”‚   â”‚   â”œâ”€â”€ home.html           # é¦–é 
â”‚   â”‚   â”œâ”€â”€ login.html          # ç™»å…¥é 
â”‚   â”‚   â”œâ”€â”€ welcome.html        # æ­¡è¿é 
â”‚   â”‚   â”œâ”€â”€ group.html          # åœ˜å–®è©³æƒ…
â”‚   â”‚   â”œâ”€â”€ profile.html        # å€‹äººè³‡æ–™
â”‚   â”‚   â”œâ”€â”€ my_groups.html      # æˆ‘çš„åœ˜å–®
â”‚   â”‚   â”œâ”€â”€ export.html         # åŒ¯å‡ºé é¢
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ partials/           # å¯é‡ç”¨å…ƒä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ group_card.html     # åœ˜å–®å¡ç‰‡ï¼ˆä¾¿åˆ©è²¼ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ home_groups.html    # é¦–é åœ˜å–®åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ order_wall.html     # è¨‚å–®ç‰†
â”‚   â”‚   â”‚   â”œâ”€â”€ my_order.html       # æˆ‘çš„è¨‚å–®
â”‚   â”‚   â”‚   â”œâ”€â”€ menu_item.html      # èœå–®é …ç›®
â”‚   â”‚   â”‚   â””â”€â”€ hot_items.html      # ç†±é–€å“é …
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ admin/              # ç®¡ç†å¾Œå°æ¨¡æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ index.html          # å¾Œå°é¦–é 
â”‚   â”‚   â”‚   â”œâ”€â”€ stores.html         # åº—å®¶åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ store_edit.html     # åº—å®¶ç·¨è¼¯
â”‚   â”‚   â”‚   â”œâ”€â”€ menus.html          # èœå–®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ users.html          # ç”¨æˆ¶ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ user_detail.html    # ç”¨æˆ¶è©³æƒ…
â”‚   â”‚   â”‚   â”œâ”€â”€ groups.html         # åœ˜å–®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ import.html         # JSON åŒ¯å…¥
â”‚   â”‚   â”‚   â”œâ”€â”€ import_preview.html # åŒ¯å…¥é è¦½
â”‚   â”‚   â”‚   â””â”€â”€ feedbacks.html      # å•é¡Œå›å ±ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ feedback/           # å•é¡Œå›å ±æ¨¡æ¿
â”‚   â”‚       â””â”€â”€ list.html           # å›å ±åˆ—è¡¨
â”‚   â”‚
â”‚   â””â”€â”€ static/                 # éœæ…‹è³‡æº
â”‚       â”œâ”€â”€ css/
â”‚       â”œâ”€â”€ js/
â”‚       â”‚   â””â”€â”€ home-refresh.js # é¦–é è‡ªå‹•åˆ·æ–°
â”‚       â””â”€â”€ images/
â”‚           â””â”€â”€ sela-logo.svg   # SELA Logo
â”‚
â”œâ”€â”€ requirements.txt            # Python ä¾è³´
â”œâ”€â”€ railway.toml                # Railway éƒ¨ç½²è¨­å®š
â””â”€â”€ .env                        # ç’°å¢ƒè®Šæ•¸ï¼ˆä¸é€²ç‰ˆæ§ï¼‰
```

---

## ğŸ—„ï¸ è³‡æ–™åº«æ¨¡å‹

### Userï¼ˆç”¨æˆ¶ï¼‰
| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | Integer | ä¸»éµ |
| line_id | String | LINE ç”¨æˆ¶ ID |
| display_name | String | é¡¯ç¤ºåç¨± |
| picture_url | String | é ­åƒç¶²å€ |
| is_admin | Boolean | æ˜¯å¦ç®¡ç†å“¡ |
| is_first_login | Boolean | æ˜¯å¦é¦–æ¬¡ç™»å…¥ |
| last_active_at | DateTime | æœ€å¾Œæ´»å‹•æ™‚é–“ |
| created_at | DateTime | å»ºç«‹æ™‚é–“ |

### Storeï¼ˆåº—å®¶ï¼‰
| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | Integer | ä¸»éµ |
| name | String | åº—å |
| category | Enum | drink/meal/group_buy |
| logo_url | String | Logo ç¶²å€ |
| phone | String | é›»è©± |
| is_active | Boolean | æ˜¯å¦å•Ÿç”¨ |

### Menu / MenuCategory / MenuItemï¼ˆèœå–®ï¼‰
- Menu: èœå–®ä¸»æª”
- MenuCategory: èœå–®åˆ†é¡ï¼ˆå¦‚ï¼šæ‹›ç‰ŒèŒ¶é£²ã€é®®å¥¶ç³»åˆ—ï¼‰
- MenuItem: èœå–®å“é …ï¼ˆå«åƒ¹æ ¼ã€å¤§æ¯åƒ¹ç­‰ï¼‰

### Groupï¼ˆåœ˜å–®ï¼‰
| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | Integer | ä¸»éµ |
| name | String | åœ˜å |
| store_id | ForeignKey | åº—å®¶ |
| owner_id | ForeignKey | åœ˜ä¸» |
| category | Enum | drink/meal/group_buy |
| deadline | DateTime | æˆªæ­¢æ™‚é–“ |
| note | String | åœ˜ä¸»å‚™è¨» |
| is_closed | Boolean | æ˜¯å¦æ‰‹å‹•é—œé–‰ |
| share_code | String | åˆ†äº«ç¢¼ |

### Order / OrderItemï¼ˆè¨‚å–®ï¼‰
| Order æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------------|------|------|
| id | Integer | ä¸»éµ |
| group_id | ForeignKey | æ‰€å±¬åœ˜å–® |
| user_id | ForeignKey | è¨‚è³¼äºº |
| status | Enum | draft/submitted/editing |
| note | String | å‚™è¨» |
| total_amount | Decimal | ç¸½é‡‘é¡ |

### Feedbackï¼ˆå•é¡Œå›å ±ï¼‰
| æ¬„ä½ | é¡å‹ | èªªæ˜ |
|------|------|------|
| id | Integer | ä¸»éµ |
| user_id | ForeignKey | å›å ±äºº |
| type | Enum | bug/suggestion/other |
| status | Enum | open/in_progress/resolved/closed |
| title | String | æ¨™é¡Œ |
| content | Text | å…§å®¹ |
| admin_note | Text | ç®¡ç†å“¡å›è¦† |

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### ğŸ  é¦–é 
- [x] åœ˜å–®ä¾¿åˆ©è²¼å¡ç‰‡é¡¯ç¤º
- [x] åˆ†å€ï¼šè¨‚é£²æ–™ / è¨‚é¤é» / åœ˜è³¼
- [x] å·²æˆªæ­¢å€ï¼ˆæœ€è¿‘ä¸€é€±ï¼‰
- [x] æ­·å²å€ï¼ˆç®¡ç†å“¡å¯è¦‹ï¼‰
- [x] å€’æ•¸è¨ˆæ™‚é¡¯ç¤º
- [x] è¨‚å–®çµ±è¨ˆï¼ˆâœ“å·²é€å‡º / ğŸ›’å¾…çµå¸³ï¼‰
- [x] é¦–é å…¬å‘Šå€
- [x] åˆ°æœŸè‡ªå‹•åˆ·æ–°ï¼ˆHTMXï¼‰

### ğŸ‘¤ ç”¨æˆ¶
- [x] LINE Login ç™»å…¥
- [x] å€‹äººè³‡æ–™é é¢
- [x] ä¿®æ”¹æš±ç¨±
- [x] é¦–æ¬¡ç™»å…¥è¨­å®šæš±ç¨±

### ğŸ“¦ åœ˜å–®
- [x] é–‹æ–°åœ˜ï¼ˆé¸åº—å®¶ã€è¨­æˆªæ­¢æ™‚é–“ï¼‰
- [x] é–‹åœ˜åˆ†é¡é¸æ“‡ï¼ˆé£²æ–™/é¤é»/åœ˜è³¼ï¼‰
- [x] åœ˜ä¸»å‚™è¨»æ¬„
- [x] ç·¨è¼¯/å–æ¶ˆåœ˜
- [x] è½‰ç§»åœ˜æ“æœ‰æ¬Š
- [x] æå‰çµå–®
- [x] QR Code åˆ†äº«
- [x] å‚¬å–®åŠŸèƒ½ï¼ˆé¡¯ç¤ºæœªçµå¸³åå–®ï¼‰

### ğŸ›’ è¨‚å–®
- [x] ä¸‰æ…‹è¨‚å–®ç®¡ç†ï¼ˆè‰ç¨¿/å·²é€å‡º/ç·¨è¼¯ä¸­ï¼‰
- [x] é£²æ–™ï¼šç”œåº¦å†°å¡Šé¸æ“‡
- [x] é£²æ–™ï¼šåŠ æ–™ç³»çµ±
- [x] é¤é»ï¼šå¤šé¸é …æ”¯æ´
- [x] è¨‚å–®ç‰†å³æ™‚é¡¯ç¤º
- [x] å·²çµå–®å¯æ”¶åˆ
- [x] ä¸€éµè¤‡è£½ä¸Šæ¬¡è¨‚å–®
- [x] éš¨æ©Ÿé¸æ“‡å™¨

### ğŸ”§ ç®¡ç†å¾Œå°
- [x] çµ±è¨ˆå„€è¡¨æ¿
- [x] åº—å®¶ç®¡ç†ï¼ˆCRUDï¼‰
- [x] èœå–®ç®¡ç†
- [x] ç”¨æˆ¶ç®¡ç†
- [x] æŸ¥çœ‹ç™»å…¥è³‡è¨Š
- [x] å¼·åˆ¶ç™»å‡ºç”¨æˆ¶
- [x] å…¬å‘Šç®¡ç†
- [x] JSON åŒ¯å…¥åº—å®¶/èœå–®
- [x] Cloudinary åœ–ç‰‡ä¸Šå‚³
- [x] å•é¡Œå›å ±ç®¡ç†

### ğŸ“Š å…¶ä»–
- [x] èœå–®åˆ†é¡å°è¦½
- [x] æœ€å¸¸é»æ¸…å–®
- [x] è¶…å¤¯æ¸…å–®ï¼ˆå…¨ç«™ç†±é–€ï¼‰
- [x] å•é¡Œå›å ±åŠŸèƒ½

---

## ğŸ”œ å¾…é–‹ç™¼åŠŸèƒ½

| åŠŸèƒ½ | é›£åº¦ | èªªæ˜ |
|------|------|------|
| å¤–é€è²»åˆ†æ”¤ | â­â­ | è‡ªå‹•å‡æ”¤è¨ˆç®— |
| è¨‚å–®åŒ¯å‡º Excel | â­ | åœ˜ä¸»çµ±è¨ˆç”¨ |
| å¤šå°ºå¯¸å®šåƒ¹ | â­â­ | M/L ä¸åŒåƒ¹æ ¼ |
| åº—å®¶æ”¶è— | â­ | å¸¸ç”¨åº—å®¶ |
| è¨‚å–®æ­·å²æŸ¥è©¢ | â­ | å€‹äººæ­·å²è¨‚å–® |

---

## ğŸ› ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯
- **æ¡†æ¶**: FastAPI
- **è³‡æ–™åº«**: PostgreSQL
- **ORM**: SQLAlchemy 2.0
- **èªè­‰**: JWT + LINE Login
- **æ¨¡æ¿**: Jinja2

### å‰ç«¯
- **CSS**: Tailwind CSS
- **äº’å‹•**: Alpine.js
- **å³æ™‚æ›´æ–°**: HTMX
- **åœ–ç¤º**: Emoji

### éƒ¨ç½²
- **å¹³å°**: Railway
- **åœ–ç‰‡**: Cloudinary
- **ç¶²è·¯**: Metal Edge (port 8080)

---

## ğŸŒ ç’°å¢ƒè®Šæ•¸

```env
# è³‡æ–™åº«
DATABASE_URL=postgresql://...

# LINE Login
LINE_CHANNEL_ID=...
LINE_CHANNEL_SECRET=...
LINE_REDIRECT_URI=https://your-domain/auth/callback

# JWT
SECRET_KEY=your-secret-key

# Cloudinary
CLOUDINARY_CLOUD_NAME=...
CLOUDINARY_API_KEY=...
CLOUDINARY_API_SECRET=...
```

---

## ğŸ“± é é¢è·¯ç”±

| è·¯å¾‘ | èªªæ˜ | æ¬Šé™ |
|------|------|------|
| `/` | é¦–é  | ç™»å…¥ |
| `/auth/login` | ç™»å…¥é  | å…¬é–‹ |
| `/auth/callback` | LINE å›èª¿ | å…¬é–‹ |
| `/auth/logout` | ç™»å‡º | ç™»å…¥ |
| `/profile` | å€‹äººè³‡æ–™ | ç™»å…¥ |
| `/groups/new` | é–‹æ–°åœ˜ | ç™»å…¥ |
| `/groups/{id}` | åœ˜å–®è©³æƒ… | ç™»å…¥ |
| `/groups/{id}/edit` | ç·¨è¼¯åœ˜å–® | åœ˜ä¸» |
| `/my-groups` | æˆ‘çš„åœ˜å–® | ç™»å…¥ |
| `/feedback` | å•é¡Œå›å ± | ç™»å…¥ |
| `/admin` | ç®¡ç†å¾Œå° | ç®¡ç†å“¡ |
| `/admin/stores` | åº—å®¶ç®¡ç† | ç®¡ç†å“¡ |
| `/admin/users` | ç”¨æˆ¶ç®¡ç† | ç®¡ç†å“¡ |
| `/admin/import` | JSON åŒ¯å…¥ | ç®¡ç†å“¡ |

---

## ğŸ¨ è¨­è¨ˆé¢¨æ ¼

- **ä¸»è‰²**: æ©˜è‰² (#F97316, Tailwind orange-500)
- **é¢¨æ ¼**: ä¾¿åˆ©è²¼å¡ç‰‡
- **å­—é«”**: ç³»çµ±å­—é«”
- **åœ–ç¤º**: Emoji
- **éŸ¿æ‡‰å¼**: æ‰‹æ©Ÿå„ªå…ˆ

---

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

### Railway éƒ¨ç½²
- ä¸è¦ä½¿ç”¨ Alembicï¼ˆä½¿ç”¨ SQLAlchemy è‡ªå‹•å»ºè¡¨ï¼‰
- `railway.toml` ä¸è¦åŒ…å« alembic å‘½ä»¤
- `requirements.txt` ä¸è¦åŒ…å« alembic

### è³‡æ–™åº«
- æ™‚é–“å„²å­˜ç‚º UTC
- é¡¯ç¤ºæ™‚è½‰æ›ç‚ºå°åŒ—æ™‚å€ï¼ˆ`taipei` filterï¼‰

### å‰ç«¯
- HTMX ç”¨æ–¼å±€éƒ¨åˆ·æ–°
- Alpine.js ç”¨æ–¼ç°¡å–®äº’å‹•
- é¿å…è¤‡é›œ JavaScript

---

*æœ€å¾Œæ›´æ–°: 2024/12/24*
